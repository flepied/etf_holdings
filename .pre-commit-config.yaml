# Pre-commit hooks for ETF Holdings project
# See https://pre-commit.com for more information

repos:
  # General file checks
- repo: https://github.com/pre-commit/pre-commit-hooks
  rev: v6.0.0
  hooks:
  - id: trailing-whitespace
    args: [--markdown-linebreak-ext=md]
  - id: end-of-file-fixer
  - id: check-yaml
  - id: check-json
  - id: check-toml
  - id: check-added-large-files
    args: [--maxkb=1000]
  - id: check-case-conflict
  - id: check-merge-conflict
  - id: check-docstring-first
  - id: debug-statements
  - id: mixed-line-ending
    args: [--fix=lf]
  - id: name-tests-test
    args: [--pytest-test-first]
  - id: requirements-txt-fixer

  # Python code formatting with Black
- repo: https://github.com/psf/black
  rev: 25.11.0
  hooks:
  - id: black
    language_version: python3
    args: [--line-length=88]

  # Python import sorting
- repo: https://github.com/PyCQA/isort
  rev: 7.0.0
  hooks:
  - id: isort
    args: [--profile, black, --line-length, '88']

  # Python linting with flake8
- repo: https://github.com/PyCQA/flake8
  rev: 7.3.0
  hooks:
  - id: flake8
    args: [--max-line-length=88, '--extend-ignore=E203,E501,W503,D100,D101,D102,D103,D200,D202,D400,D401,B007,B023,F541,F401,F841', --max-complexity=35]
    additional_dependencies: [flake8-docstrings, flake8-bugbear]

  # Python security checks
- repo: https://github.com/PyCQA/bandit
  rev: 1.9.0
  hooks:
  - id: bandit
    args: [-c, pyproject.toml]
    additional_dependencies: ['bandit[toml]']
    exclude: ^tests/

  # YAML formatting
- repo: https://github.com/macisamuele/language-formatters-pre-commit-hooks
  rev: v2.15.0
  hooks:
  - id: pretty-format-yaml
    args: [--autofix, --indent, '2']

  # Markdown linting
- repo: https://github.com/igorshubovych/markdownlint-cli
  rev: v0.39.0
  hooks:
  - id: markdownlint-fix
    exclude: ^\.github/

  # Check for common security issues
- repo: https://github.com/Yelp/detect-secrets
  rev: v1.5.0
  hooks:
  - id: detect-secrets
    args: [--baseline, .secrets.baseline]
    exclude: package.lock.json

  # Python type checking (optional but recommended)
  # - repo: https://github.com/pre-commit/mirrors-mypy
  #   rev: v1.8.0
  #   hooks:
  #     - id: mypy
  #       additional_dependencies: [types-requests, types-setuptools]
  #       args: [--ignore-missing-imports, --no-strict-optional]
